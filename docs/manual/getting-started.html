<script type="module">

    import { LX } from 'lexgui';

    const content = document.querySelector('.lexdocs-content');

    const header = LX.makeContainer([null, "200px"], "flex flex-col gap-2 text-center items-center place-content-center", `
        <span class="text-4xl font-medium text-card-foreground">Get started with ShaderHub</span>
    `, content);

    const headerButtons = LX.makeContainer(["auto", "auto"], "flex flex-row p-2", ``, header);
    const getStartedButton = new LX.Button(null, "Get Started", () => {
        window.location.href = `${window.location.origin}/create/`;
    }, { buttonClass: "primary lg" });
    headerButtons.appendChild(getStartedButton.root);

    const collapsibleClass = 'my-0 bg-accent/30 hover:bg-accent/50! rounded-xl border-color cursor-pointer [&_svg]:w-5! [&_svg]:h-5!';

    // GETTING STARTED

    docMaker.header("Getting Started", "h1", "getting-started");

    docMaker.paragraph(`
ShaderHub is a WebGPU-based shader playground that lets you create, run, and share shaders directly in your browser.
You write WGSL shader code, connect textures, uniforms, or audio, and instantly see the result on the canvas.
No setup, no downloads, no installations—just real-time GPU-accelerated shaders running on the web.
`);

    docMaker.header("Creating a Shader", "h2", "creating-a-shader");

    docMaker.paragraph(`
To create a new shader, click the <span class="font-bold">New</span> button in the top menu bar.
This opens the shader editor with a default setup, ready to run.
`);

    docMaker.paragraph(`
ShaderHub shaders are composed of one or more passes.
Each pass runs on the GPU and contributes to the final result shown on the canvas.
You can start with a single pass and build complexity as you go.
`);

    docMaker.header("Understanding the Editor Interface", "h2", "editor-interface");

    docMaker.paragraph(`
When you open the shader editor, you'll see several key components:
`);

    docMaker.bulletList([
        "<span class='font-bold'>Code Editor</span>: The main area where you write your WGSL shader code. It features syntax highlighting, error detection, and autocomplete.",
        "<span class='font-bold'>Canvas Preview</span>: The right panel displays your shader's output in real time. You can resize it or toggle fullscreen.",
        "<span class='font-bold'>Pass Tabs</span>: At the top of the code editor, tabs allow you to switch between different shader passes (Image, Compute, or Common).",
        "<span class='font-bold'>Channels Area</span>: At the bottom, you'll find channel inputs (iChannel0–iChannel3).",
    ]);

    docMaker.header("Your First Shader", "h2", "first-shader");

    docMaker.paragraph(`
The default shader creates a simple gradient. Here's what a minimal shader looks like:
`);

    docMaker.code(`fn mainImage(fragUV : vec2f, fragCoord : vec2f) -> vec4f {
    // fragUV contains normalized coordinates (0.0 to 1.0)
    // fragCoord contains pixel coordinates

    // Create a horizontal gradient using the UV x-coordinate
    let color = vec3f(fragUV.x, 0.0, 0.5);

    // Return the final color with full opacity
    return vec4f(color, 1.0);
}`, "wgsl");

    docMaker.paragraph(`
This shader uses <span class='font-code'>fragUV</span> (normalized coordinates from 0 to 1) to create a color gradient.
Try modifying the values to see how the output changes!
`);

    docMaker.header("Running Your Shader", "h2", "running-your-shader");

    docMaker.paragraph(`
After writing or modifying your shader code, you need to compile it before seeing the results.
ShaderHub compiles your WGSL code into GPU-executable instructions and immediately runs it on the canvas.
`);

    docMaker.paragraph(`
To compile and run your shader, use any of these methods:
`);

    docMaker.bulletList([
        `Click the <span class="font-bold">Compile</span> button in the editor toolbar`,
        `Press ${LX.makeKbd(["Ctrl", "S"], false, "text-base inline-block border-color px-1 rounded").innerHTML} (Save and compile)`,
        `Press ${LX.makeKbd(["Ctrl", "Enter"], false, "text-base inline-block border-color px-1 rounded").innerHTML}`,
        `Press ${LX.makeKbd(["Ctrl", "Space"], false, "text-base inline-block border-color px-1 rounded").innerHTML}`,
    ]);

    docMaker.paragraph(`
<span class='font-bold underline underline-offset-4'>On successful compilation:</span> The canvas updates immediately, showing your shader's output.
The code area displays a green border.
`);

    docMaker.paragraph(`
<span class='font-bold underline underline-offset-4'>On compilation errors:</span> Error messages appear directly in the code editor,
highlighting the problematic lines in red. The error description helps you identify and fix the issue quickly. The code area displays a red border.
`);

    docMaker.header("Live Preview", "h2", "live-preview");

    docMaker.paragraph(`
The canvas updates in real time as your shader runs.
This allows you to experiment quickly with values, logic, and visual ideas without restarting or refreshing.
`);

    docMaker.paragraph(`
You can interact with your shader using inputs like time, mouse position, screen resolution, textures, or audio.
These inputs are exposed to your shader through uniforms and channels, which are covered in later sections.
`);

    docMaker.header("Interacting with the Canvas", "h2", "canvas-interaction");

    docMaker.paragraph(`
The canvas is interactive and responds to your actions:
`);

    docMaker.bulletList([
        "<span class='font-bold'>Mouse Input</span>: Move your mouse over the canvas to see how shaders respond to mouse position. Click and drag to interact further.",
        "<span class='font-bold'>Resize</span>: Drag the divider between the code editor and canvas to adjust the preview size.",
        "<span class='font-bold'>Fullscreen</span>: Toggle fullscreen mode to view your shader at full resolution.",
        "<span class='font-bold'>Pause/Play</span>: Control shader animation using the play/pause controls in the status bar."
    ]);

    docMaker.header("Saving Your Work", "h2", "saving-work");

    docMaker.paragraph(`
To save your shader, you'll need to create a ShaderHub account or sign in.
Once logged in, click the <span class="font-bold">Save</span> button in the top menu bar to store your shader.
`);

    docMaker.paragraph(`
Your saved shaders are stored in your profile and can be accessed anytime.
You can make them public to share with the community, or keep them private for personal projects.
`);

    docMaker.note(`
If you're not logged in, your work is stored temporarily in your browser.
Make sure to sign in and save before closing the tab to avoid losing your progress!
`, true);

    docMaker.header("Next Steps", "h2", "next-steps");

    docMaker.paragraph(`
Now that you have a shader running, here's what to explore next:
`);

    docMaker.bulletList([
        "Learn about <span class='font-bold'>Shader Passes</span> and how to combine Image, Compute, and Common passes for complex effects",
        "Discover <span class='font-bold'>Channels</span> to connect textures, sounds, and pass outputs to your shader",
        "Master <span class='font-bold'>Default Uniforms</span> like iTime, iMouse, and iResolution to add interactivity",
        "Create <span class='font-bold'>Custom Uniforms</span> with sliders and color pickers to control your shader parameters",
        "Use the <span class='font-bold'>Preprocessor</span> to define constants and conditional compilation",
        "Explore the <span class='font-bold'>Community</span>: search, like, comment on, and remix shaders from other users"
    ]);

    docMaker.header("Troubleshooting", "h2", "troubleshooting");

    docMaker.paragraph(`
If your shader doesn't compile or behaves unexpectedly, check the following:
`);

    docMaker.bulletList([
        "<span class='font-bold'>Compilation Errors</span>: Error messages appear directly in the code editor with line numbers. Read them carefully—they often point to the exact issue.",
        "<span class='font-bold'>Browser Compatibility</span>: ShaderHub requires WebGPU support. Use a recent version of Chrome, Edge, or another WebGPU-compatible browser.",
        "<span class='font-bold'>Syntax Issues</span>: WGSL syntax is strict. Common mistakes include missing semicolons, incorrect type declarations, or undefined variables.",
        "<span class='font-bold'>Performance</span>: Complex shaders can slow down the canvas. Try reducing iterations, simplifying calculations, or using lower resolutions while testing."
    ]);

    docMaker.note(`
WebGPU is still evolving. If you encounter bugs or unexpected behavior, please report them on the
<a class='underline underline-offset-4' href="https://github.com/jxarco/ShaderHub/issues">GitHub repository</a>.
`);

    docMaker.header("Source Code", "h1", "source-code");

    docMaker.paragraph(`ShaderHub is an open-source project, and its source code is available on GitHub. You can find the repository <a class='underline underline-offset-4' href="https://github.com/jxarco/ShaderHub">here</a>.`);

</script>